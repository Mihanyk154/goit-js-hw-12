{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict';\n\n//  ============functions==========\n\nfunction imageTemplate(images) {\n    return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${images.largeImageURL}\">\n      <img class=\"gallery-image\" src=\"${images.webformatURL}\" alt=\"${images.tags}\" />\n    </a>\n    <ul class=\"info-list\">\n        <li class=\"info-item\">\n          <h4 class=\"info-item-header\">Likes</h4>\n          <p class=\"info-item-value\">${images.likes}</p>\n        </li>\n        <li class=\"info-item\">\n          <h4 class=\"info-item-header\">Views</h4>\n          <p class=\"info-item-value\">${images.views}</p>\n        </li>\n        <li class=\"info-item\">\n          <h4 class=\"info-item-header\">Comments</h4>\n          <p class=\"info-item-value\">${images.comments}</p>\n        </li>\n        <li class=\"info-item\">\n          <h4 class=\"info-item-header\">Downloads</h4>\n          <p class=\"info-item-value\">${images.downloads}</p>\n        </li>\n      </ul>\n    </li>`;\n}\nexport function imagesTemplate(arr) {\n    return arr.map(imageTemplate).join('');\n}","\"use strict\";\n\n//  ============libraries import==========\n\nimport axios from 'axios';\n\n//  ============main const==========\n\nconst axios1 = axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n        key: '44401278-613f3c82386bcb5b22d8a73ae',\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: 15,\n    },\n});\n\n//  ============functions==========\n\nexport async function fetchImg(searchedImg, page) {\n    const res = await axios1.get('', {\n        params: {\n            q: searchedImg,\n            page: page,\n        }\n    });\n    return res.data;\n};","'use strict';\n\n//  ============libraries import==========\n\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\n//  ============functions and img import==========\nimport { imagesTemplate } from \"./js/render-functions\";\nimport { fetchImg } from \"./js/pixabay-api.js\"\n\n//  ============main const==========\n\nconst iziToastOptions = {\n    message:\n        \"We're sorry, but you've reached the end of search results.\",\n    messageColor: 'white',\n    backgroundColor: '#EF4040',\n    iconUrl: \"imageUrl\",\n    maxWidth: '360px',\n    position: 'bottomRight',\n    theme: 'dark',\n};\n\nconst lightBox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loader = document.querySelector('.loader');\n\nlet inputData = '';\nlet page = 0;\nconst perPage = 15;\nlet maxHits = 0;\n\n//  ============Search button functions==========\n\nform.addEventListener('submit', formElemSubmit);\n\nasync function formElemSubmit(e) {\n    e.preventDefault();\n    page = 1;\n    gallery.innerHTML = '';\n\n\n\n    showLoader();\n\n\n    inputData = e.target.elements.searchImg.value.trim();\n    if (!inputData) {\n        showError('please write something');\n        hideLoadMoreBtn();\n        hideLoader()\n        return;\n    }\n    try {\n        const data = await fetchImg(inputData);\n        maxHits = Math.ceil(data.totalHits / perPage);\n\n        if (maxHits === 0) {\n            showError('no matches');\n            hideLoader();\n            updateBtnStatus();\n            return;\n        }\n\n        const markup = imagesTemplate(data.hits);\n        gallery.innerHTML = markup;\n        lightBox.refresh();\n        showLoadMoreBtn();\n    } catch {\n        iziToast.show('Error!');\n    }\n    hideLoader();\n    updateBtnStatus();\n};\n// ===================load more button function==========================\n\nloadMoreBtn.addEventListener('click', loadMoreBTNSubmit);\nasync function loadMoreBTNSubmit() {\n    showLoader();\n    hideLoadMoreBtn();\n    page += 1;\n    try {\n        const data = await fetchImg(inputData, page);\n        const markup = imagesTemplate(data.hits);\n        gallery.insertAdjacentHTML('beforeend', markup);\n        lightBox.refresh();\n        skipElem();\n    } catch {\n        iziToast.show('Error!');\n    }\n    hideLoader();\n    updateBtnStatus();\n}\n// =======================help functions===============================\nfunction showLoader() {\n    loader.classList.remove('visually-hidden');\n}\n\nfunction hideLoader() {\n    loader.classList.add('visually-hidden');\n}\n\nfunction showLoadMoreBtn() {\n    loadMoreBtn.classList.remove('visually-hidden');\n}\n\nfunction hideLoadMoreBtn() {\n    loadMoreBtn.classList.add('visually-hidden');\n}\n\nfunction updateBtnStatus() {\n    if (page >= maxHits) {\n        hideLoadMoreBtn();\n\n\n        if (maxHits) {\n            iziToast.info(iziToastOptions);\n        }\n    } else {\n        showLoadMoreBtn();\n    }\n};\n\nfunction showError(message) {\n    iziToast.error({\n        message,\n        position: 'topRight',\n    });\n};\n\nfunction skipElem() {\n    const liElem = gallery.children[0];\n    const heights = liElem.getBoundingClientRect().height;\n    scrollBy({\n        'top': heights * 2,\n        'behavior': 'smooth'\n    })\n};"],"names":["imageTemplate","images","imagesTemplate","arr","axios1","axios","fetchImg","searchedImg","page","iziToastOptions","lightBox","SimpleLightbox","form","gallery","loadMoreBtn","loader","inputData","perPage","maxHits","formElemSubmit","showLoader","showError","hideLoadMoreBtn","hideLoader","data","updateBtnStatus","markup","showLoadMoreBtn","iziToast","loadMoreBTNSubmit","skipElem","message","heights"],"mappings":"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"}